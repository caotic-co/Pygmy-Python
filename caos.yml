virtual_environment: "venv"

dependencies:
  nuitka: "~0.6.8"

tasks:
  build:
    - "echo 'PygmyPython:INFO: Creating Linux binary...'"
    - "((test -d dist) && (rm -Rf dist)) || exit 0"
    - "(caos python -m nuitka --standalone --follow-imports pygmypython.py) ||
      (echo 'PygmyPython:ERROR: There was a problem when creating the Linux binaries'; exit 1)"
    - "((test -d pygmypython.build) && (rm -Rf pygmypython.build)) || exit 0"
    - "mv ./pygmypython.dist ./dist/pygmypython"
    - "echo 'PygmyPython:SUCCESS: Binary created'"

  tests:
    - caos python -m unittest discover -v tests