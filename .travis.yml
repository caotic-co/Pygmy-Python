language: python
python: 3.8

addons:
  apt:
    packages:
      - chrpath

install:
  - pip install caos~=2.0

script:
  - caos init
  - ln -s $(which pip) venv/bin/pip # This is a hack for Travis CI that adds the missing pip binary
  - caos update
  - caos run tests
  - caos run build

deploy:
  provider: releases
  api_key: $GITHUB_OAUTH_TOKEN
  file: "dist/**/*"
  skip_cleanup: true
  on:
    branch: master
    tags: true

